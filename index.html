<!doctype html>
<html lang="he">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnus Sol</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #000;
      margin: 0;
      padding: 20px;
      color: #fff;
    }

    h1 {
      font-size: 40px;
      text-align: center;
      font-weight: bold;
      color: #fff;
      margin-bottom: 20px;
    }

    select, input {
      display: block;
      margin: 0 auto 20px auto;
      padding: 8px 12px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      background: #222;
      color: #fff;
      text-align: center;
    }

    input {
      width: 60vw;
    }

    .item {
      display: flex;
      flex-direction: row;
      align-items: center;
      background: #222;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      max-width: 95vw;
    }

    .img-container {
      width: 12vw;
      aspect-ratio: 3 / 4;
      flex-shrink: 0;
      overflow: hidden;
      border-radius: 10px;
      margin-right: 20px;
    }

    .img-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .details {
      flex: 1;
    }

    .name {
      font-weight: bold;
      padding-bottom: 10px;
      font-size: 25px;
      color: #fff;
      margin-right: 25px;
    }

    .date, .size, .quality, .last-updated, .category {
      color: #999;
      font-size: 18px;
      margin-top: 2px;
      margin-right: 25px;
    }

    a.download {
      color: #ff0000;
      font-size: 20px;
      text-decoration: none;
      padding-right: 10px;
    }

    a.download:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .item { flex-direction: row; align-items: flex-start; }
      .img-container { width: 30vw; }
      .name, .date, .size, .quality { font-size: 4vw; }
      a.download { font-size: 5vw; margin-left: 10px; }
    }
  </style>
</head>
<body>
  <h1>Magnus Sol</h1>

  <select id="categorySelect">
    <option value="all">All</option>
    <option value="software">Software</option>
    <option value="games">Games</option>
    <option value="tv">TV</option>
    <option value="films">Films</option>
  </select>

  <input id="searchInput" type="text" placeholder="Search">

  <div id="list"></div>

  <script>
    const csvUrl = "https://raw.githubusercontent.com/sadkjasldjlajdj3323213sdad/t/refs/heads/main/torrents.csv?t=" + new Date().getTime();
    let allItems = [];

    fetch(csvUrl)
      .then(res => res.text())
      .then(text => {
        const rows = text.trim().split('\n').slice(1);
        allItems = rows.map(line => {
          const parts = line.split(',');
          const [name, date, image, magnet, size, quality, last_updated, category] = parts.map(x => x.trim());
          return { name, date, image, magnet, size, quality, last_updated, category };
        });
        renderList("all", "");
      });

    function renderList(filter, searchText = "") {
      const list = document.getElementById('list');
      list.innerHTML = "";

      const filtered =
        (filter === "all"
          ? allItems
          : allItems.filter(item =>
              item.category && item.category.toLowerCase() === filter.toLowerCase()
            ))
        .filter(item =>
          item.name.toLowerCase().includes(searchText.toLowerCase())
        );

      filtered.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <div class="img-container"><img src="${item.image}" alt="${item.name}"></div>
          <div class="details">
            <div class="name">${item.name}</div>
            <div class="date">Release Date: ${item.date}</div>
            <div class="size">Size: ${item.size}</div>
            <div class="quality">Quality: ${item.quality}</div>
            <div class="last-updated">Last updated: ${item.last_updated}</div>
            <div class="category">Category: ${item.category}</div>
          </div>
          <a class="download" href="${item.magnet}">Magnet</a>
        `;
        list.appendChild(div);
      });
    }

    document.getElementById("searchInput").addEventListener("input", e => {
      const category = document.getElementById("categorySelect").value;
      renderList(category, e.target.value);
    });

    document.getElementById("categorySelect").addEventListener("change", e => {
      const searchText = document.getElementById("searchInput").value;
      renderList(e.target.value, searchText);
    });
  </script>
</body>
</html>